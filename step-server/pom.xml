<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>hr</groupId>
    <artifactId>step-server</artifactId>
    <version>1.0</version>
	<packaging>war</packaging>
	
	<parent>
	    <groupId>org.springframework.boot</groupId>
	    <artifactId>spring-boot-starter-parent</artifactId>
	    <version>1.4.1.RELEASE</version>
	</parent>

    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <version.spring>4.1.8.RELEASE</version.spring>
		<java.version>1.8</java.version>
		<servlet-api.version>3.1</servlet-api.version>
		<!-- log -->
		<logback-classic.version>1.1.7</logback-classic.version>
		<logback-ext-spring.version>0.1.4</logback-ext-spring.version>
		<jcl-over-slf4j.version>1.7.21</jcl-over-slf4j.version>
		<!-- data -->
		<druid.version>1.0.18</druid.version>
		<mysql-connector-java.version>5.1.42</mysql-connector-java.version>
		<ehcache.version>2.6.11</ehcache.version>
		<mybatis-spring-boot-starter.version>1.3.0</mybatis-spring-boot-starter.version>
		<fastjson.version>1.2.31</fastjson.version>

    </properties>

    <dependencies>
    	<dependency>
			<groupId>org.springframework.boot</groupId>
			<artifactId>spring-boot-starter-aop</artifactId>
		</dependency>

		<!-- data begin -->
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-jdbc</artifactId>
        </dependency>
		<dependency>
			<groupId>org.springframework.boot</groupId>
			<artifactId>spring-boot-starter-data-jpa</artifactId>
		</dependency>	
		
		<dependency>
			<groupId>com.alibaba</groupId>
			<artifactId>druid</artifactId>
			<version>${druid.version}</version>
		</dependency>
		<dependency>
			<groupId>mysql</groupId>
			<artifactId>mysql-connector-java</artifactId>
			<version>${mysql-connector-java.version}</version>
		</dependency>
		<dependency>
		    <groupId>org.springframework.boot</groupId>
		    <artifactId>spring-boot-starter-cache</artifactId>
		</dependency>
		<dependency>
			<groupId>org.springframework.boot</groupId>
			<artifactId>spring-boot-starter-data-redis</artifactId>
		</dependency>
		<dependency>
		    <groupId>org.hibernate</groupId>
		    <artifactId>hibernate-ehcache</artifactId>
		</dependency>
		<!-- data end -->
        
       
		<dependency>
		    <groupId>com.google.protobuf</groupId>
		    <artifactId>protobuf-java</artifactId>
		    <version>3.3.1</version>
		</dependency>
		<dependency>
		    <groupId>com.google.protobuf</groupId>
		    <artifactId>protobuf-java-util</artifactId>
		    <version>3.3.1</version>
		</dependency>
		<dependency>
			<groupId>com.alibaba</groupId>
			<artifactId>fastjson</artifactId>
			<version>${fastjson.version}</version>
		</dependency>
		
		<dependency>
			<groupId>com.aliyun.oss</groupId>
			<artifactId>aliyun-sdk-oss</artifactId>
			<version>2.2.1</version>
		</dependency>
		<dependency>
			<groupId>com.aliyun</groupId>
			<artifactId>aliyun-java-sdk-core</artifactId>
			<version>2.1.7</version>
		</dependency>
		<dependency>
			<groupId>com.aliyun</groupId>
			<artifactId>aliyun-java-sdk-sts</artifactId>
			<version>2.1.6</version>
		</dependency>
	    <dependency>
		    <groupId>commons-io</groupId>
		    <artifactId>commons-io</artifactId>
		    <version>2.4</version>
		</dependency>
		<!-- log begin -->
		<dependency>
			<groupId>ch.qos.logback</groupId>
			<artifactId>logback-classic</artifactId>
			<version>${logback-classic.version}</version>
		</dependency>
		<dependency>
			<groupId>org.logback-extensions</groupId>
			<artifactId>logback-ext-spring</artifactId>
			<version>${logback-ext-spring.version}</version>
		</dependency>
		<dependency>
			<groupId>org.slf4j</groupId>
			<artifactId>jcl-over-slf4j</artifactId>
			<version>${jcl-over-slf4j.version}</version>
		</dependency>
		<!-- log end -->
	    


		<dependency>
		    <groupId>org.springframework.boot</groupId>
		    <artifactId>spring-boot-starter-tomcat</artifactId>
		    <scope>provided</scope>
		</dependency>
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-web</artifactId>
			<exclusions>
			        <exclusion>
			            <groupId>org.springframework.boot</groupId>
			            <artifactId>spring-boot-starter-tomcat</artifactId>
			        </exclusion>
			 </exclusions>
        </dependency>
        
		<dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-actuator</artifactId>
        </dependency>
		<dependency>
			<groupId>org.springframework.boot</groupId>
			<artifactId>spring-boot-configuration-processor</artifactId>
			<optional>true</optional>
		</dependency>
		<dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-devtools</artifactId>
            <optional>true</optional>
        </dependency>
 
		<dependency>
		    <groupId>io.springfox</groupId>
		    <artifactId>springfox-swagger2</artifactId>
		    <version>2.7.0</version>
		</dependency>
		<dependency>
		    <groupId>io.springfox</groupId>
		    <artifactId>springfox-swagger-ui</artifactId>
		    <version>2.7.0</version>
		</dependency>
		
		<dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-security</artifactId>
        </dependency>

		
		<dependency>
			<groupId>org.springframework.boot</groupId>
			<artifactId>spring-boot-starter-test</artifactId>
			<scope>test</scope>
		</dependency>
    </dependencies>


    <build>
     <plugins>
			<plugin>
			    <groupId>org.apache.maven.plugins</groupId>
			    <artifactId>maven-war-plugin</artifactId>
			    <configuration>
			        <warName>step</warName>
			    </configuration>
			</plugin>
			<plugin>
			            <groupId>org.apache.maven.plugins</groupId>
			            <artifactId>maven-surefire-plugin</artifactId>
						<configuration>  
						        <skip>true</skip>  
						</configuration> 
			 </plugin>
			<plugin>  
				    <artifactId>maven-antrun-plugin</artifactId>
					<configuration>   

				    </configuration> 
				    <executions>  
				        <execution>  
				            <id>compile-protoc</id>  
				            <phase>generate-sources</phase>  
				            <configuration>
				                <target>
				                    <mkdir dir="src/main/java" />  
				                    <path id="proto.path">  
				                        <fileset dir="protobuf/proto">  
				                            <include name="**/*.proto" />  
				                        </fileset>  
				                    </path>  
				                    <pathconvert pathsep=" " property="proto.files"  
				                        refid="proto.path" />  
				                    <exec executable="${project.basedir}/protobuf/protoc3.1/bin/protoc">  
				                        <arg value="--java_out=src/main/java" />  
				                        <arg value="-I${project.basedir}/protobuf/proto" />  
				                        <arg line="${proto.files}" />  
				                    </exec>  
				                </target>   
				                <sourceRoot>src/main/java</sourceRoot>  
				            </configuration>  
				            <goals>  
				                <goal>run</goal>  
				            </goals>  
				        </execution>  
				    </executions>  
				</plugin>
				<plugin>  
			    <artifactId>maven-clean-plugin</artifactId>  
			    <configuration>  
			        <verbose>true</verbose>  
			        <filesets>  
			            <fileset>  
			                <directory>src/main/gen-java</directory>  
			            </fileset>  
			        </filesets>  
			    </configuration>  
			</plugin> 
	        <plugin>
	            <groupId>org.springframework.boot</groupId>
	            <artifactId>spring-boot-maven-plugin</artifactId>
	            <configuration>
                     <fork>true</fork>
                </configuration>
	            <!-- 热部署，项目下命令行执行：mvn spring-boot:run -->
	            <dependencies>
	                <dependency>
	                    <groupId>org.springframework</groupId>
	                    <artifactId>springloaded</artifactId>
	                    <version>1.2.7.RELEASE</version>
	                </dependency>
	            </dependencies>
	        </plugin>
        </plugins>
     <pluginManagement>
     	<plugins>

     	<!--This plugin's configuration is used to store Eclipse m2e settings only. It has no influence on the Maven build itself.-->
     		<plugin>
     		<groupId>org.eclipse.m2e</groupId>
     		<artifactId>lifecycle-mapping</artifactId>
     		<version>1.0.0</version>
     		<configuration>
     			<lifecycleMappingMetadata>
     				<pluginExecutions>
     					<pluginExecution>
     						<pluginExecutionFilter>
     							<groupId>
     								org.apache.maven.plugins
     							</groupId>
     							<artifactId>
     								maven-antrun-plugin
     							</artifactId>
     							<versionRange>[1.8,)</versionRange>
     							<goals>
     								<goal>run</goal>
     							</goals>
     						</pluginExecutionFilter>
     						<action>
     							<ignore></ignore>
     						</action>
     					</pluginExecution>
     				</pluginExecutions>
     			</lifecycleMappingMetadata>
     		</configuration>
     		</plugin>
     	</plugins>
     </pluginManagement>
    </build>

    <repositories>
        <repository>
            <id>spring-milestone</id>
            <url>https://repo.spring.io/libs-release</url>
        </repository>
    </repositories>

    <pluginRepositories>
        <pluginRepository>
            <id>spring-milestone</id>
            <url>https://repo.spring.io/libs-release</url>
        </pluginRepository>
    </pluginRepositories>
</project>
